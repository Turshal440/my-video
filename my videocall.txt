
)
<!DOCTYPE html>
<html>
<head>
  <title>Video Call</title>
  <script src="<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5051988520538995"
     crossorigin="anonymous"></script>></script>
  <style>
    body {
      background: #0f172a;
      color: white;
      text-align: center;
      font-family: Arial;
    }
    video {
      width: 45%;
      border-radius: 10px;
      border: 2px solid #334155;
      margin: 5px;
    }
    button {
      padding: 10px 15px;
      margin: 10px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>ðŸ“¹ 2-Person Video Call</h2>

<input id="roomId" placeholder="Room ID" />
<button onclick="joinRoom()">Join Room</button>

<br><br>

<video id="localVideo" autoplay muted></video>
<video id="remoteVideo" autoplay></video>

<script>
  const socket = io();
  let localStream;
  let peer;
  let roomId;

  const config = {
    iceServers: [{ urls: "stun:stun.l.google.com:19302" }]
  };

  async function joinRoom() {
    roomId = document.getElementById("roomId").value;
    socket.emit("join-room", roomId);

    localStream = await navigator.mediaDevices.getUserMedia({
      video: true,
      audio: true
    });

    document.getElementById("localVideo").srcObject = localStream;

    peer = new RTCPeerConnection(config);
    localStream.getTracks().forEach(track => peer.addTrack(track, localStream));

    peer.ontrack = e => {
      document.getElementById("remoteVideo").srcObject = e.streams[0];
    };

    peer.onicecandidate = e => {
      if (e.candidate) {
        socket.emit("signal", { roomId, data: { candidate: e.candidate } });
      }
    };
  }

  socket.on("user-joined", async () => {
    const offer = await peer.createOffer();
    await peer.setLocalDescription(offer);
    socket.emit("signal", { roomId, data: { offer } });
  });

  socket.on("signal", async data => {
    if (data.offer) {
      await peer.setRemoteDescription(new RTCSessionDescription(data.offer));
      const answer = await peer.createAnswer();
      await peer.setLocalDescription(answer);
      socket.emit("signal", { roomId, data: { answer } });
    }
    if (data.answer) {
      await peer.setRemoteDescription(new RTCSessionDescription(data.answer));
    }
    if (data.candidate) {
      await peer.addIceCandidate(new RTCIceCandidate(data.candidate));
    }
  });
</script>

</body>
</html>

/socket.io/socket.io.js
